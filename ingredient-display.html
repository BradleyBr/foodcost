<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="./node_modules/bulma/css/bulma.css">
        <style>
            hr {
                background-color: rgb(223, 223, 223);
            }
        </style>
    </head>
    <body>
        <div>
            <h1 class="title">Assumptions</h1>
            <h2 class="subtitle">Ingredients Display</h2><br />
            <h2 class="subtitle">Cod</h2>
            <div class="display-cod-weight"></div>
            <div class="display-cod-price"></div>
            <div class="display-cod-trim"></div>
            <div class="display-cod-price-individual-trimmed"></div>
            <div class="display-cut-fish"></div>
            <div class="display-cost-single-fish"></div>

            <hr>

            <h2 class="subtitle">Potatoes</h2>
            <div class="display-potato-weight"></div>
            <div class="display-potato-price"></div>
            <div class="display-potato-fries"></div>
            
            <button class="data-input">click me</button>
        </div>
    </body>
    <script>
    
        $ = require('jquery')
        let codWeight = localStorage.getItem('cod-weight')
        let codPrice = localStorage.getItem('cod-price')
        let codTrim = localStorage.getItem('cod-trim')
        let cutFish = localStorage.getItem('cut-fish')
        
        let potatoWeight = localStorage.getItem('potato-weight')
        let potatoPrice = localStorage.getItem('potato-price')
        let potatoFries = localStorage.getItem('potato-fries')

        if (codTrim === null || codTrim.length === 0) {
            codTrim = 0
        } else {
            codTrim = codTrim/100
        }

        let codPriceTrim = Number.parseFloat((codPrice/(codWeight*(1-codTrim))).toFixed(2))
        let singleFishCost = Number.parseFloat(((codPriceTrim*codWeight)/cutFish).toFixed(2))
        
        let potatoPricePerPound = Number.parseFloat((potatoPrice/potatoWeight).toFixed(2))

        let codSwitch = {
            weight: false,
            price: false
        }

        if (!codWeight) {
            codSwitch.weight = false
            $('.display-cod-weight').html('<p>No cod weight data available</p>')
        } else {
            codSwitch.weight = true
            $('.display-cod-weight').html(`<p>Weight of cod (per box): ${codWeight}lbs</p>`)
        }

        if (!codPrice) {
            codSwitch.price = false
            $('.display-cod-price').html('<p>No pricing data available</p>')
        } else {
            codSwitch.price = true
            $('.display-cod-price').html(`<p>Price of cod (per box): ${codPrice}</p>`)
        }

        if (!codTrim) {
            $('.display-cod-trim').html('<p>No trim rate data available</p>')
        } else {
            $('.display-cod-trim').html(`<p>Trim rate: ${codTrim*100}%</p>`)
        }

        if (codSwitch.weight === true && codSwitch.price === true) {
         $('.display-cod-price-individual-trimmed').html(`<p>Price of cod per lb after trim: ${codPriceTrim}</p>`)   
        }

        if (!cutFish) {
            $('.display-cut-fish').html('<p>No cut fish per box data available</p>')
        } else {
            $('.display-cut-fish').html(`Cut fish per box: ${cutFish}`)
        }

        if (!singleFishCost) {
            $('.display-cost-single-fish').html('<p>No cost of individual fish data available</p>')
        } else {
            $('.display-cost-single-fish').html(`<p>Cost of individual fish: ${singleFishCost}</p>`)
        }

        !potatoWeight ? 
            $('.display-potato-weight').html('<p>No potato weight data available</p>') :
            $('.display-potato-weight').html(`<p>Weight of potatoes (per box): ${potatoWeight}lbs</p>`)
        
        !potatoPrice ?
            $('.display-potato-price').html('<p>No potato pricing data available</p>') :
            $('.display-potato-price').html(`<p>Price of potatoes (per box): ${Number(potatoPrice).toFixed(2)}</p>`)

        $('.data-input').click(() => {
            window.location.href = './index.html'
        })
    </script>
</html>